<div class="container-fluid">
	<div class="row">
		<div class="col-12">
			<div class="card">
				<div class="card-body">
					<div class="row">
						<div class="col-md-6">
							<form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
								<div class="mb-3">
									<app-control-message [control]="profileForm.get('name')!">
										<label for="fullname" class="form-label">Nombre</label>
										<input
											class="form-control"
											type="text"
											formControlName="name"
											placeholder="Ingresa tu nombre" />
									</app-control-message>
								</div>
								<div class="mb-3">
									<app-control-message [control]="profileForm.get('email')!">
										<label class="form-label">Correo electrónico</label>
										<input
											class="form-control"
											type="email"
											formControlName="email"
											placeholder="Ingresa tu correo electrónico" />
									</app-control-message>
								</div>

								<div class="row">
									<div class="col-12 d-flex justify-content-center">
										<button
											class="btn btn-primary"
											type="submit"
											[disabled]="isLoading"
											style="width: 250px">
											<i class="mdi mdi-login"></i> Guardar
										</button>
									</div>
								</div>
							</form>
						</div>

						<div class="col-md-6">
							<div class="mb-3 mt-3 mt-xl-0">
								<label for="projectname" class="mb-0">Avatar</label>
								<!-- File Upload -->
								<form
									[formGroup]="uploadForm"
									class="dropzone"
									id="myAwesomeDropzone"
									data-plugin="dropzone"
									data-previews-container="#file-previews"
									data-upload-preview-template="#uploadPreviewTemplate">
									<div class="fallback">
										<input type="file" (change)="changeImage($event)" />
									</div>

									<div class="col-sm-4 col-md-3 col-lg-3 mx-auto">
										<img
											*ngIf="!imagePrev"
											class="img-fluid"
											[src]="
												user.image | notImage : 'user' | safe : 'resourceUrl'
											"
											alt="imagen-perfil" />
										<img
											*ngIf="imagePrev"
											class="img-fluid"
											[src]="imagePrev"
											alt="imagen" />
									</div>
								</form>
							</div>
							<div class="row">
								<div class="col-12 d-flex justify-content-center">
									<button
										class="btn btn-primary"
										type="button"
										(click)="uploadImage()"
										style="width: 250px">
										<i class="mdi mdi-login"></i> Actualizar imagen
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
